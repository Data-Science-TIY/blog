
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">

        <title>Checking In</title>

        <link href="../assets/css/bootstrap.min.css?v=b1fc768d8d" rel="stylesheet">
        <link href="../assets/css/bootflat.min.css?v=b1fc768d8d" rel="stylesheet">
		<link href="../assets/css/octicons.css?v=b1fc768d8d" rel="stylesheet">
        <link href="../assets/css/app.css?v=b1fc768d8d" rel="stylesheet">

        <link rel="shortcut icon" href="../favicon.ico">

        <link rel="canonical" href="index.html">
    
    <meta property="og:site_name" content="Build It Green">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Checking In">
    <meta property="og:description" content="More APIs…More Data We are settled in today and got a little closer to finishing the MVP — a single page website that displays LEED stats by state and trends over time.  Mark has been working on the state map,...">
    <meta property="og:url" content="http://localhost:2368/checking-in/">
    <meta property="article:published_time" content="2015-07-13T01:13:00.000Z">
    <meta property="article:modified_time" content="2015-07-13T15:18:51.611Z">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Checking In">
    <meta name="twitter:description" content="More APIs…More Data We are settled in today and got a little closer to finishing the MVP — a single page website that displays LEED stats by state and trends over time.  Mark has been working on the state map,...">
    <meta name="twitter:url" content="http://localhost:2368/checking-in/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Build It Green",
    "author": {
        "@type": "Person",
        "name": "josh higgins",
        "url": "http://localhost:2368/author/josh",
        "sameAs": null,
        "description": null
    },
    "headline": "Checking In",
    "url": "http://localhost:2368/checking-in/",
    "datePublished": "2015-07-13T01:13:00.000Z",
    "dateModified": "2015-07-13T15:18:51.611Z",
    "description": "More APIs…More Data We are settled in today and got a little closer to finishing the MVP — a single page website that displays LEED stats by state and trends over time.  Mark has been working on the state map,..."
}
    </script>

    <meta name="generator" content="Ghost 0.6">
    <link rel="alternate" type="application/rss+xml" title="Build It Green" href="../rss/index.html">
    </head>
    <body>
        <div id="wrap">
            <div class="navbar navbar-inverse navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand pull-left" href="../"> Build It Green</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="nav-home">
  <a href="../">
    Home
  </a>
</li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
                <!--
                <li><a href="#"><span class="octicon octicon-mention"></span> Follow me</a></li>
                <li><a href="#"><span class="octicon octicon-mark-github"></span> Fork me</a></li>
                -->
                <li><a href="../rss/index.rss"><span class="octicon octicon-rss"></span> RSS</a></li>
		<li><a href="http://localhost:2368/ghost/"><span class="octicon octicon-pencil"></span></a></li>
            </ul>
        </div>
    </div>
</div>
            
            

<div class="container-fluid container-abitabove">
    <div class="row">
        <div class="col-lg-12 centered text-center container-withcover no-cover" style="">
            <h1>Checking In</h1>
            <h5>
                <time datetime="2015-07-13"><span class="mega-octicon octicon-calendar"></span> 2015-07-13 at 11:19</time>
            </h5>
        </div>
    </div>
</div>
            
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1 centered">
                        <main>
    <article class="post">
        <section class="posts">
            <p>More APIs…More Data</p>

<p>We are settled in today and got a little closer to finishing the MVP — a single page website that displays LEED stats by state and trends over time.  Mark has been working on the state map, my side has been to provide him data via our Django REST framework API.  Since states are a model in our database, I used a generic ListAPIView for GET requests about the states.  I wrote a serializer that would display info for each state.</p>

<p>For example:</p>

<pre><code> class StateMapSerializer(serializers.ModelSerializer):
     number_of_projects =        serializers.SerializerMethodField()
 class Meta:
     model = State

 fields = ('abbreviation', 'name', 'number_of_projects',

 def get_number_of_projects(self, obj):
     return obj.project_set.all().count()
</code></pre>

<p>For each state, we’ll have a bunch of queries that are serialized that Mark can display on a US map.</p>

<p>For now, he can access all the state data through one api URL.</p>

<p>API Views <br>
Generic views and viewsets can be great, but if you need to get some basic queries to the API, using a regular APIView does the trick.</p>

<p>It was good review to some of these for the trend data by year for LEED projects.</p>

<pre><code>class AllTrends(APIView):

def get(self, request, format=None):
    """
    Return trends by year.
    """
    trends_dict = {}
    year_list = [2009, 2010, 2011, 2012, 2013, 2014]
    projects_certified_dict = {i: Project.objects
       .filter(certification_date__gte=datetime(i, 1,\                                 
       1)).filter(certification_date__lte=datetime(i,\       
       12,31)).count() for i in year_list}
    trends_dict["total_certifications"] =   
       projects_certified_dict

 return Response(trends_dict)
</code></pre>

<p>Then link this up to a URL and it is ready for the front end.</p>

<p>We have a few more queries to write for trend display— then our back end will be ready for our MVP of state and yearly trends.  That means it is time for...</p>

<p>More Data <br>
We got our scraper to work on the LEED site!  We’ve got detailed score data for about 7000 projects to do some in depth analysis on how builders are using the system. </p>

<p>Which points are easiest to attain?  Which are hardest?  Do project total scores cluster around the cutoffs for each certification level?  We’ll spend the next couple days doing analysis as we finish up the MVP.  Then we’ll have our second phase of visualizations to display.</p>

<p>Check in with us again and see how we’re doing!</p>
            <hr>
        </section>
    </article>
</main>
<!--
  Add comments code if needed, i.e. to include disqus
-->
<!-- <div id="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'replacethiswithyourname'; // required: replace example with your own shortname
	    var disqus_identifier = '';
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">Comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<!-- End Comments Code -->
 --&gt;

                    </div>
                </div>
            </div>
        </div>

        <div id="footer">
            <footer>
    <div class="footer text-center">
      <div class="container">
          <div class="row">
              <div class="col-lg-10 col-lg-offset-1 centered">
                © Copyright Build It Green • powered by Ghost • <a href="https://github.com/fabienwang/Ghost-Flat"><span class="octicon octicon-mark-github"></span> Ghost-Flat</a> theme
              </div>
          </div>
      </div>
  </div>
</footer>
        </div>

        <script src="../public/jquery.js?v=b1fc768d8d"></script>
        <script src="../assets/js/d3.min.js?v=b1fc768d8d"></script>
        <script src="../assets/js/lodash.min.js?v=b1fc768d8d"></script>
        <script src="../assets/js/icheck.min.js?v=b1fc768d8d"></script>
        <script src="../assets/js/jquery.fs.selecter.min.js?v=b1fc768d8d"></script>
        <script src="../assets/js/jquery.fs.stepper.min.js?v=b1fc768d8d"></script>
        <script src="../assets/js/os-vis.js?v=b1fc768d8d"></script>
        <script src="../assets/js/bootstrap.min.js?v=b1fc768d8d"></script>
        <script src="../assets/js/ghost-blog.js?v=b1fc768d8d"></script>
    </body>
