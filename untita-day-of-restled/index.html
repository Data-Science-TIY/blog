
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">

        <title>A day of REST</title>

        <link href="../assets/css/bootstrap.min.css?v=ec6ae03e5b" rel="stylesheet">
        <link href="../assets/css/bootflat.min.css?v=ec6ae03e5b" rel="stylesheet">
		<link href="../assets/css/octicons.css?v=ec6ae03e5b" rel="stylesheet">
        <link href="../assets/css/app.css?v=ec6ae03e5b" rel="stylesheet">

        <link rel="shortcut icon" href="../favicon.ico">

        <link rel="canonical" href="index.html">
    
    <meta property="og:site_name" content="Build It Green">
    <meta property="og:type" content="article">
    <meta property="og:title" content="A day of REST">
    <meta property="og:description" content="Today we started to get rolling on our MVP - a data visualization of LEED projects in the United States.  On the front end we plan to have an interactive map visualizing the LEED project totals for each state with...">
    <meta property="og:url" content="http://localhost:2368/untita-day-of-restled/">
    <meta property="article:published_time" content="2015-07-09T02:44:44.297Z">
    <meta property="article:modified_time" content="2015-07-13T15:08:02.462Z">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A day of REST">
    <meta name="twitter:description" content="Today we started to get rolling on our MVP - a data visualization of LEED projects in the United States.  On the front end we plan to have an interactive map visualizing the LEED project totals for each state with...">
    <meta name="twitter:url" content="http://localhost:2368/untita-day-of-restled/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Build It Green",
    "author": {
        "@type": "Person",
        "name": "josh higgins",
        "url": "http://localhost:2368/author/josh",
        "sameAs": null,
        "description": null
    },
    "headline": "A day of REST",
    "url": "http://localhost:2368/untita-day-of-restled/",
    "datePublished": "2015-07-09T02:44:44.297Z",
    "dateModified": "2015-07-13T15:08:02.462Z",
    "description": "Today we started to get rolling on our MVP - a data visualization of LEED projects in the United States.  On the front end we plan to have an interactive map visualizing the LEED project totals for each state with..."
}
    </script>

    <meta name="generator" content="Ghost 0.6">
    <link rel="alternate" type="application/rss+xml" title="Build It Green" href="../rss/index.html">
    </head>
    <body>
        <div id="wrap">
            <div class="navbar navbar-inverse navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand pull-left" href="../"> Build It Green</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="nav-home">
  <a href="../">
    Home
  </a>
</li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
                <!--
                <li><a href="#"><span class="octicon octicon-mention"></span> Follow me</a></li>
                <li><a href="#"><span class="octicon octicon-mark-github"></span> Fork me</a></li>
                -->
                <li><a href="../rss/index.rss"><span class="octicon octicon-rss"></span> RSS</a></li>
		<li><a href="http://localhost:2368/ghost/"><span class="octicon octicon-pencil"></span></a></li>
            </ul>
        </div>
    </div>
</div>
            
            

<div class="container-fluid container-abitabove">
    <div class="row">
        <div class="col-lg-12 centered text-center container-withcover no-cover" style="">
            <h1>A day of REST</h1>
            <h5>
                <time datetime="2015-07-13"><span class="mega-octicon octicon-calendar"></span> 2015-07-13 at 11:08</time>
            </h5>
        </div>
    </div>
</div>
            
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1 centered">
                        <main>
    <article class="post">
        <section class="posts">
            <p>Today we started to get rolling on our MVP - a data visualization of LEED projects in the United States.  On the front end we plan to have an interactive map visualizing the LEED project totals for each state with more granular data accessible by hovering.</p>

<p>On the back end that means we need to have an API that can communicate with our node front end.  Throughout class we have worked with the Django REST framework.  Today I worked on implementing the first views, serializers and urls for our site.  The basics of REST as we have implemented at the Iron Yard are that URLs are nouns, HTTP actions are verbs (GET, POST, PATCH, PUT, DELETE).  Each query is self-contained and stateless.</p>

<p>Our MVP only needs PUT functionality, so I chose an generic ListAPIView for a list of states at the URL api/states/.  The serializer defined a number of SerializerMethodFields to render our data to JSON. For example, I want an average of LEED scores for the latest version of LEED.  First, I made a serializer:</p>

<pre><code>average_of_leed_nc_v2009 = serializers.SerializerMethodField()
</code></pre>

<p>Then, define the output for the serializer:</p>

<pre><code>def get_average_of_leed_nc_v2009(self, obj):
if not obj.project_set.filter(leed_version="LEED-NC v2009")\
        .aggregate(Avg('points_achieved'))['points_achieved__avg']:
    return 0
else:
    return int(round(obj.project_set.filter(leed_version="LEED-NC v2009")\
        .aggregate(Avg('points_achieved'))['points_achieved__avg']))
</code></pre>

<p>We had some null values that are converted to 0 with the if statement.  Otherwise, we’ll take the rounded average for display on the site.</p>

<p>We did something similar for most of our state data and we are ready to visualize.</p>

<p>Python Tips <br>
We’re also still cleaning some data.  I had a particularly tricky small csv containing building permit stats for each state over the last 15 years.  Each column alternated between two different data, so I had to put data from the odd columns into one model and even columns into another.  I was pretty happy with my solution:</p>

<pre><code>def make_state_building_permits():

with open("states_building_permits.csv") as infile:
    reader = csv.reader(infile)
    for row in reader:

        for i in range(len(row)):

            if i == 0:
                print(row[0])

            elif i % 2 != 0:
                building_permit = BuildingPermit()
                building_permit.state_id = State.objects.get(abbreviation = col_headers[i])
                building_permit.year = row[0]
                building_permit.total = row[i]
                building_permit.save()

            else:
                housing_permit = HousingPermit()
                housing_permit.state_id = State.objects.get(abbreviation = col_headers[i])
                housing_permit.year = row[0]
                housing_permit.total = row[i]
                housing_permit.save()
</code></pre>

<p>(note: col_headers was a list of state abbreviations that corresponded to the csv headers)</p>

<p>Check in tomorrow for some more progress.  We are hoping to start Phase 2 of our data collection — digging into some individual scores for specific buildings.</p>
            <hr>
        </section>
    </article>
</main>
<!--
  Add comments code if needed, i.e. to include disqus
-->
<!-- <div id="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'replacethiswithyourname'; // required: replace example with your own shortname
	    var disqus_identifier = '';
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">Comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<!-- End Comments Code -->
 --&gt;

                    </div>
                </div>
            </div>
        </div>

        <div id="footer">
            <footer>
    <div class="footer text-center">
      <div class="container">
          <div class="row">
              <div class="col-lg-10 col-lg-offset-1 centered">
                © Copyright Build It Green • powered by Ghost • <a href="https://github.com/fabienwang/Ghost-Flat"><span class="octicon octicon-mark-github"></span> Ghost-Flat</a> theme
              </div>
          </div>
      </div>
  </div>
</footer>
        </div>

        <script src="../public/jquery.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/d3.min.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/lodash.min.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/icheck.min.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/jquery.fs.selecter.min.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/jquery.fs.stepper.min.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/os-vis.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/bootstrap.min.js?v=ec6ae03e5b"></script>
        <script src="../assets/js/ghost-blog.js?v=ec6ae03e5b"></script>
    </body>
